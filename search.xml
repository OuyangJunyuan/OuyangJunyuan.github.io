<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo + github pages æ­å»ºä¸ªäººåšå®¢</title>
    <url>/2021/12/12/Hexo-github-pages-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    <content><![CDATA[<p>â€‹        å¿«é€Ÿä¸Šæ‰‹<code>hexoåšå®¢æ¡†æ¶</code>+<code>volantisä¸»é¢˜</code>+<code>github pageséƒ¨ç½²</code>  æ­å»ºä¸ªäººåšå®¢. </p>
<span id="more"></span>



<p>â€‹        é€‚åˆåƒæˆ‘ä¸€æ ·,è™½ç„¶ä¸çŸ¥é“æ­ä¸ªåšå®¢å¹²å•¥(å¾ˆé…·?)(å¹³å¸¸è®°å½•éƒ½è´´çŸ¥ä¹äº†),ä¹Ÿä¸ä¼šå‰ç«¯é‚£å¥—æŠ€æœ¯æ ˆçš„äººå¿«é€Ÿæ­ä¸€ä¸ªæ»¡è¶³ä¸€ä¸‹è‡ªå·±çš„å¥½å¥‡å¿ƒ.</p>
<p>â€‹        å‡ å°æ—¶å†…çš„å»ºè®¾<a href="https://ouyangjunyuan.github.io/">æˆæœ</a>(æ„Ÿè°¢å¤§ä½¬ä»¬æ­çš„æ¡†æ¶å’Œå†™çš„æ–‡æ¡£). è™½ç„¶ä¸ªäººåšå®¢/ä¸»é¡µæ­å»ºæœ‰å¾ˆå¤šæ–‡ç« äº†,ä½†æˆ‘è¿˜æ˜¯æŠŠè‡ªå·±çš„è¿‡ç¨‹è®°å½•å’Œåˆ†äº«ä¸€ä¸‹.</p>
<h1 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h1><ol>
<li><p>å®‰è£…nodejså’Œnpm</p>
<p>é¦–å…ˆæŸ¥çœ‹nodejsç‰ˆæœ¬</p>
<p><code> nodejs -v</code> ,å¦‚æœç‰ˆæœ¬ä½äº10éœ€è¦å‡çº§.</p>
<p><code>curl -sL https://deb.nodesource.com/setup_12.x | bash - </code> ç„¶åupdateä¸€ä¸‹</p>
<p><code> sudo apt-get install -y nodejs</code></p>
<p><code>sudo apt-get install npm</code></p>
</li>
<li><p>å®‰è£…hexo(åšå®¢æ¡†æ¶?)</p>
<p><code>npm install hexo</code>å°±å®‰è£…å¥½äº†</p>
<p>ç„¶åæ‰¾ä¸€ä¸ªç›®å½•ä½œä¸ºä¸ªäººåšå®¢çš„æºç ä»“åº“.<code>mkdir ~/Blog</code></p>
<p><code>cd ~ &amp;&amp; hexo init Blog</code> å°±å¼€å§‹ä¸‹è½½ä¸€äº›ä¾èµ–å¹¶æ„å»ºåšå®¢ä»“åº“äº†.</p>
</li>
<li><p>éƒ¨ç½²</p>
<p>githubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“, ä»“åº“åä¸º<code>ç”¨æˆ·å.io</code>å¦‚<a href="https://github.com/OuyangJunyuan/OuyangJunyuan.github.io">OuyangJunyuan.github.io</a> </p>
<p>å›åˆ°åšå®¢ä»“åº“<code>~/Blog</code>, ä¿®æ”¹å…¶ä¸­<code>_config.yaml</code> æ‰¾åˆ°deploy, å¡«å…¥github repo.</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span>  </span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:OuyangJunyuan/OuyangJunyuan.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥äº†.</p>
</li>
</ol>
<p>hexo<a href="https://hexo.io/zh-cn/docs/">æ–‡æ¡£å‚è€ƒ</a>,ç„¶åç†Ÿæ‚‰ä¸€ä¸‹å‘½ä»¤,åœ¨åšå®¢ä»“åº“å†…è¾“å…¥:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean # æ¸…é™¤ç”Ÿæˆç»“æœ</span><br><span class="line">hexo g # ç”Ÿæˆé¡µé¢</span><br><span class="line">hexo s # éƒ¨ç½²åˆ°æœ¬åœ°</span><br><span class="line">hexo d # éƒ¨ç½²åˆ°è¿œç¨‹</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶å¯ä»¥è¯•è¯•<code>hexo g &amp;&amp; hexo s</code>, è®¿é—®é“¾æ¥å°±æ˜¯ç”Ÿæˆçš„ç»“æœ</p>
<p><img src="https://s2.loli.net/2021/12/12/W8gF7kzNil5EaL9.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/W8gF7kzNil5EaL9.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212191805604"></p>
<p><img src="https://s2.loli.net/2021/12/12/mI6ECAlsaMgKZ3U.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/mI6ECAlsaMgKZ3U.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212191848764"></p>
<h1 id="ä¸»é¢˜é…ç½®"><a href="#ä¸»é¢˜é…ç½®" class="headerlink" title="ä¸»é¢˜é…ç½®"></a>ä¸»é¢˜é…ç½®</h1><p>ä¸‹é¢å¼€å§‹ä»‹ç»æ€ä¹ˆå¼„å‡ºé¡µé¢æ¥.é¦–å…ˆåŸºäºhexoæ¡†æ¶çš„åšå®¢æœ‰è®¸å¤šå¼€æºä¸»é¢˜,å¸®æˆ‘æ­å¥½äº†æ¡†æ¶.å¸®æˆ‘ä»¬å®ç°äº†å¦‚ä¸‹çš„åŠŸèƒ½:</p>
<ul>
<li><strong>ç¼–å†™.md -&gt; å†™åšå®¢</strong></li>
<li>ä¿®æ”¹.yml -&gt; ä¿®æ”¹é…ç½®é¡µé¢</li>
</ul>
<p>æˆ‘ä»¬é€‰æ‹©å¥½çœ‹çš„<code>volantis</code>: åˆ°åšå®¢ä»“åº“ä¸‹çš„<code>_config.yml</code>ä¸­ä¿®æ”¹<code>theme: volantis</code>,ç„¶å<code>npm i hexo-theme-volantis</code> å®‰è£…ä¸»é¢˜. å®‰è£…å®Œä¸»é¢˜åé‡æ–°</p>
<p><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code>,è®¿é—®è¿æ¥<a href="http://localhost:4000é¢„è§ˆä¸€ä¸‹.å¥½åƒå˜å¾—å¥½çœ‹äº†ä¸€ç‚¹">http://localhost:4000é¢„è§ˆä¸€ä¸‹.å¥½åƒå˜å¾—å¥½çœ‹äº†ä¸€ç‚¹</a>???</p>
<p><img src="https://s2.loli.net/2021/12/12/mpcJYGs3PxahONT.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/mpcJYGs3PxahONT.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212192150601"></p>
<h1 id="åšå®¢ç¼–å†™"><a href="#åšå®¢ç¼–å†™" class="headerlink" title="åšå®¢ç¼–å†™"></a>åšå®¢ç¼–å†™</h1><p>åªéœ€è¦<code>hexo new &#39;my_first_blog&#39;</code> å°±å¯ä»¥åœ¨<code>~/Blog/source/_post/</code>ä¸‹ç”Ÿæˆä¸€ä¸ªmarkdownæ–‡æ¡£.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(dl) âœ  blog hexo new <span class="string">&#x27;my_first_blog&#x27;</span>           </span><br><span class="line">INFO  Validating config</span><br><span class="line">INFO  </span><br><span class="line">============================================================</span><br><span class="line">  Volantis 5.0.0-rc.1</span><br><span class="line">  Docs: https://volantis.js.org/</span><br><span class="line">  Repo: https://github.com/volantis-x/hexo-theme-volantis/</span><br><span class="line">============================================================</span><br><span class="line">INFO  Created: ~/blog/<span class="built_in">source</span>/_posts/my-first-blog.md</span><br></pre></td></tr></table></figure>

<p><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code>,è®¿é—®è¿æ¥<a href="http://localhost:4000é¢„è§ˆä¸€ä¸‹.å°±å¯ä»¥çœ‹åˆ°ä¸»é¡µä¸Šå¤šäº†ä¸€ç¯‡åšå®¢">http://localhost:4000é¢„è§ˆä¸€ä¸‹.å°±å¯ä»¥çœ‹åˆ°ä¸»é¡µä¸Šå¤šäº†ä¸€ç¯‡åšå®¢</a>.</p>
<p><img src="https://s2.loli.net/2021/12/12/QSZOurz8PJcxbME.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/QSZOurz8PJcxbME.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212192650314"></p>
<h1 id="ä¸ªæ€§åŒ–é…ç½®"><a href="#ä¸ªæ€§åŒ–é…ç½®" class="headerlink" title="ä¸ªæ€§åŒ–é…ç½®"></a>ä¸ªæ€§åŒ–é…ç½®</h1><p><code>~/Blog/_config.yml</code>ä¸­</p>
<h2 id="site"><a href="#site" class="headerlink" title="site"></a>site</h2><div class="story post-story"><p><img src="https://s2.loli.net/2021/12/12/ZnMg87Ue93LIhVw.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/ZnMg87Ue93LIhVw.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212192952097"></p>
<p><code>title: Hexo  # ä¿®æ”¹ä¸ºè‡ªå·±çš„åå­—</code> , è¿™æ˜¯ç½‘é¡µçš„æ ‡é¢˜</p>
<p><code>favicon: https://s2.loli.net/2021/12/10/qpIiAZe9lFWT75H.png # ç½‘é¡µå›¾æ ‡</code> </p>
</div><h2 id="ä¸»é¡µå°é¢"><a href="#ä¸»é¡µå°é¢" class="headerlink" title="ä¸»é¡µå°é¢"></a>ä¸»é¡µå°é¢</h2><div class="story post-story"><p>å¤åˆ¶<code>~Blog/node_modules/hexo-theme-volantis/_config.yml</code>ä¸º<code>~/Blog/_config.volantis.yml</code> ç„¶åä¿®æ”¹<code>_config.volantis.yml</code> </p>
<p>ç»ˆç‚¹å…³æ³¨<code>background</code>,<code>logo</code> ,<code>title</code>,<code>subtitle</code>,<code>search</code> <code>features</code></p>
<p>å®ƒä»¬åˆ†åˆ«æ˜¯</p>
<p><img src="https://s2.loli.net/2021/12/12/y8kld3rGNPM9aeS.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/y8kld3rGNPM9aeS.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212193402005"></p>
<p>å…¶ä¸­iconçš„å›¾æ ‡æ˜¯font awesome ç³»åˆ—çš„, å¯ä»¥åˆ°<a href="http://www.fontawesome.com.cn/faicons/">è¿™é‡Œ</a>æŸ¥å¯¹åº”iconçš„id.</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="attr">height_scheme:</span> <span class="string">full</span> <span class="comment"># full, half</span></span><br><span class="line">  <span class="attr">layout_scheme:</span> <span class="string">search</span> <span class="comment"># blank (ç•™ç™½), search (æœç´¢), dock (å), featured (ç²¾é€‰), focus (ç„¦ç‚¹)</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">home:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">archive:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">others:</span> <span class="literal">false</span> <span class="comment"># can be written in front-matter &#x27;cover: true&#x27;</span></span><br><span class="line">  <span class="attr">background:</span> <span class="string">https://s2.loli.net/2021/12/11/P8osRanT5FrtHuC.jpg</span> <span class="comment">#https://s2.loli.net/2021/12/10/2iCOIJd1R3uXmfN.jpg</span></span><br><span class="line">  <span class="attr">logo:</span> <span class="string">https://s2.loli.net/2021/12/10/qpIiAZe9lFWT75H.png</span></span><br><span class="line">  <span class="attr">title:</span> <span class="string">&#x27;Au1ong&#x27;</span></span><br><span class="line">  <span class="attr">subtitle:</span> <span class="string">&#x27;ã€ŒKeep moving.Stay happy!ã€&#x27;</span></span><br><span class="line">  <span class="attr">search:</span> <span class="string">&#x27; ä½ æ˜¯æ•…æ„æ‰¾å²”å„¿æ˜¯ä¸æ˜¯ğŸ˜…&#x27;</span> <span class="comment"># search bar placeholder</span></span><br><span class="line">  <span class="attr">features:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">æ–‡æ¡£</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">archives/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">å…³äº</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-info-circle</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">about/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">github</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://github.com/OuyangJunyuan</span></span><br></pre></td></tr></table></figure>

</div><h2 id="ä¾§æ ä¸ªäººä»‹ç»"><a href="#ä¾§æ ä¸ªäººä»‹ç»" class="headerlink" title="ä¾§æ ä¸ªäººä»‹ç»"></a>ä¾§æ ä¸ªäººä»‹ç»</h2><div class="story post-story"><p>åŒæ ·æ˜¯<code>~/Blog/_config.volantis.yml</code>,éœ€æ”¹çš„åœ°æ–¹æ˜¯sidebar:widget_library:blogger. å¦‚æœä¾§è¾¹æ æƒ³åŠ å…¥æ–°çš„ä¸œè¥¿,å¯ä»¥åœ¨<code>widget_library</code> ä¸­æ·»åŠ ç»„ä»¶.ç„¶åå°†ç»„ä»¶å¡«åˆ°<code>for_page</code> å’Œ<code>for_post</code> åˆ—è¡¨ä¸­,åˆ†åˆ«å¯¹åº”äº†ä¸»é¡µä¾§æ å’Œæ–‡ç« ä¾§æ .</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">sidebar:</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># left right</span></span><br><span class="line">  <span class="comment"># ä¸»é¡µã€åˆ†ç±»ã€å½’æ¡£ç­‰ç‹¬ç«‹é¡µé¢</span></span><br><span class="line">  <span class="attr">for_page:</span> [<span class="string">blogger</span>,<span class="string">github</span>,<span class="string">category</span>,<span class="string">tagcloud</span>,<span class="string">webinfo</span>] <span class="comment"># åœ¨é¡µé¢ä¸­æ˜¾ç¤º  ï¼Œä¸­æ–‡é€—å·ä¼šä½¿å¾—åç»­å†…å®¹å¤±æ•ˆ</span></span><br><span class="line">  <span class="comment"># layout: docs/post è¿™ç±»æ–‡ç« é¡µé¢</span></span><br><span class="line">  <span class="attr">for_post:</span> [<span class="string">toc</span>] <span class="comment"># åœ¨æ–‡ç« ä¸­æ˜¾ç¤º</span></span><br><span class="line">  <span class="comment"># ä¾§è¾¹æ ç»„ä»¶åº“</span></span><br><span class="line">  <span class="attr">widget_library:</span></span><br><span class="line">    <span class="comment"># ---------------------------------------</span></span><br><span class="line">    <span class="comment"># blogger info widget</span></span><br><span class="line">    <span class="attr">blogger:</span></span><br><span class="line">      <span class="attr">class:</span> <span class="string">blogger</span></span><br><span class="line">      <span class="attr">display:</span> [<span class="string">desktop</span>, <span class="string">mobile</span>] <span class="comment"># [desktop, mobile]  æ¡Œé¢ç«¯å’Œæ‰‹æœºç«¯éƒ½å¯ä»¥çœ‹åˆ°</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://s2.loli.net/2021/12/11/A8vVRJM2CdfHOyL.png</span></span><br><span class="line">      <span class="attr">shape:</span> <span class="string">circle</span> <span class="comment"># circle, rectangle</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">/about/</span></span><br><span class="line">      <span class="attr">title:</span> <span class="string">&#x27;Auiong Tsunguan&#x27;</span></span><br><span class="line">      <span class="attr">subtitle:</span> <span class="string">&#x27; èººå¹³å¹³ &amp; æ•²ä»£ç  &#x27;</span></span><br><span class="line">      <span class="attr">jinrishici:</span> <span class="literal">false</span> <span class="comment"># Poetry Today. You can set a string, and it will be displayed when loading fails.</span></span><br><span class="line">      <span class="attr">social:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">https://github.com/OuyangJunyuan/</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">https://s2.loli.net/2021/12/11/91ROkjpEMHvP8he.png</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">https://www.zhihu.com/people/ou-yang-jun-yuan/</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-qq</span></span><br><span class="line">          <span class="attr">url:</span>  <span class="string">mailto:706545330</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-envelope</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">mailto:706545330@qq.com</span></span><br><span class="line">         </span><br><span class="line"> <span class="string">...</span></span><br></pre></td></tr></table></figure>



</div><h2 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h2><div class="story post-story"><p>ç”±äº<a href="https://volantis.js.org/v5/getting-started/">å®˜æ–¹æ–‡æ¡£</a>å†™çš„å¾ˆæ¸…æ¥šäº†,æˆ‘å°±ä¸å†æ„ä¹‰è½¬å‘.</p>
<p>å…¶ä¸­çš„æ ‡ç­¾æ˜¯ä¸»é¢˜å¯¹markdownçš„æ‹“å±•.</p>
<p><img src="https://s2.loli.net/2021/12/12/7yt6z3JMwcIYheX.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/7yt6z3JMwcIYheX.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212194022018"></p>
<p>å¯ä»¥æ˜¾ç¤ºä¸€äº›æ›´æ¼‚äº®ä¸œè¥¿.</p>
<p><img src="https://s2.loli.net/2021/12/12/ADJ9bFlwghT3W4G.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/ADJ9bFlwghT3W4G.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212194138352"></p>
<p><img src="https://s2.loli.net/2021/12/12/AOyP1lxq369opds.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/AOyP1lxq369opds.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212194144406"></p>

</div>]]></content>
      <categories>
        <category>æ•™ç¨‹</category>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>æ‚é¡¹</tag>
      </tags>
  </entry>
  <entry>
    <title>Learn Hexo</title>
    <url>/2021/12/10/Learn-Hexo/</url>
    <content><![CDATA[<p>è¿™æ˜¯æ‘˜è¦</p>
<div class="note"><p>info æ‘˜è¦</p></div>

<span id="more"></span>



<p>è¿™æ˜¯æ­£æ–‡</p>
<p>çœ‹è¿™ä¸ªæ–‡æ¡£<a href="https://volantis.js.org/v5/getting-started/">https://volantis.js.org/v5/getting-started/</a></p>
<p>$\alpha$<br>$$<br>\beta<br>$$</p>
<p>test markdown pic</p>
<p>ğŸ‘ğŸ‘</p>
<img src="https://s2.loli.net/2021/12/10/7dhPE4Cx2VDvl5B.jpg" class="lazyload" data-srcset="https://s2.loli.net/2021/12/10/7dhPE4Cx2VDvl5B.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="example pic" style="zoom:50%;" />

<p><img src="https://s2.loli.net/2021/12/10/2iCOIJd1R3uXmfN.jpg" class="lazyload" data-srcset="https://s2.loli.net/2021/12/10/2iCOIJd1R3uXmfN.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="mmexport1610430983424"></p>
<p><img src="https://s2.loli.net/2021/12/11/oYvq9uP4WgAdpB3.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/11/oYvq9uP4WgAdpB3.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="çŸ¥ä¹ (1)"></p>
<p><img src="https://s2.loli.net/2021/12/11/91ROkjpEMHvP8he.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/11/91ROkjpEMHvP8he.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="çŸ¥ä¹ (3)"></p>
<p><img src="https://s2.loli.net/2021/12/11/ahv15SOXT9EUJbV.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/11/ahv15SOXT9EUJbV.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="çŸ¥ä¹ (2)"></p>
<p><img src="https://s2.loli.net/2021/12/10/r3lvL6i5Nde7GPZ.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/10/r3lvL6i5Nde7GPZ.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="ç¾Š"></p>
<p><img src="https://s2.loli.net/2021/12/10/fRaB8yQDgshr7Y1.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/10/fRaB8yQDgshr7Y1.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="å°ç»µç¾Š"></p>
<p><img src="https://s2.loli.net/2021/12/10/qpIiAZe9lFWT75H.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/10/qpIiAZe9lFWT75H.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="ç»µé˜³"></p>
<p><img src="https://s2.loli.net/2021/12/10/FwrM5uRDTkti126.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/10/FwrM5uRDTkti126.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="å°ç»µç¾Š"></p>
<p><img src="https://s2.loli.net/2021/12/10/L31xkctNjyGQVoZ.jpg" class="lazyload" data-srcset="https://s2.loli.net/2021/12/10/L31xkctNjyGQVoZ.jpg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="wallhaven-9mg17w"></p>
<p><img src="https://s2.loli.net/2021/12/11/A8vVRJM2CdfHOyL.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/11/A8vVRJM2CdfHOyL.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="å±å¹•æˆªå›¾"></p>
<p><img src="/home/ou/.config/Typora/typora-user-images/image-20211211214543550.png" class="lazyload" data-srcset="/home/ou/.config/Typora/typora-user-images/image-20211211214543550.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211211214543550"></p>
<h1 id="å¡é€šäººç‰©"><a href="#å¡é€šäººç‰©" class="headerlink" title="å¡é€šäººç‰©"></a>å¡é€šäººç‰©</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure>

<p>ç„¶åé€‰ä¸€ä¸ª <a href="https://github.com/xiazeyu/live2d-widget-models">å¡é€šäººç‰©</a> å®‰è£…å¯¹åº”åŒ…,æ¨èlive2d-widget-model-shizuku,live2d-widget-model-koharu, live2d-widget-model-haruto.<a href="https://blog.csdn.net/wang_123_zy/article/details/87181892">é¢„è§ˆ</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install packagename</span><br></pre></td></tr></table></figure>



<h1 id="æ ‡ç­¾å­¦ä¹ "><a href="#æ ‡ç­¾å­¦ä¹ " class="headerlink" title="æ ‡ç­¾å­¦ä¹ "></a>æ ‡ç­¾å­¦ä¹ </h1><p><a href="https://volantis.js.org/v5/tag-plugins/">å‚è€ƒ</a></p>
<p>å¯ä»¥è®¤ä¸ºæ ‡ç­¾æ˜¯å†™markdownçš„ä¸€ç§æ‹“å±•,å¯ä»¥æ¸²æŸ“å‡ºæ›´å¥½çœ‹å’Œæ›´å¤šçš„ä¸œè¥¿</p>
<div class="note info"><p>[note info]</p></div>

<p><img src="https://s2.loli.net/2021/12/11/7pnO8xdzWeijcfg.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/11/7pnO8xdzWeijcfg.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211211230924175"></p>
<p>è¿™ä¸ªgallery,ä¹Ÿæœ‰ç”¨,ç”¨æ¥å±•ç¤ºå¤šä¸ªå›¾ç‰‡</p>
<div galleryFlag itemscope itemtype="http://schema.org/ImageGallery" class="gallery å‚æ•°" data-group='åˆ†ç»„'><div class='fancybox'><a class='fancybox' pjax-fancybox itemscope itemtype="http://schema.org/ImageObject" itemprop="url" href='https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/B18FCBB3-67FD-48CC-B4F3-457BA145F17A.jpeg' data-fancybox='åˆ†ç»„' data-caption='å›¾ç‰‡æè¿°'><img fancybox itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/B18FCBB3-67FD-48CC-B4F3-457BA145F17A.jpeg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/B18FCBB3-67FD-48CC-B4F3-457BA145F17A.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="å›¾ç‰‡æè¿°"></a><span class='image-caption'>å›¾ç‰‡æè¿°</span></div><br><div class='fancybox'><a class='fancybox' pjax-fancybox itemscope itemtype="http://schema.org/ImageObject" itemprop="url" href='https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/67239FBB-E15D-4F4F-8EE8-0F1C9F3C4E7C.jpeg' data-fancybox='åˆ†ç»„' data-caption='undefined'><img fancybox itemprop="contentUrl" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/67239FBB-E15D-4F4F-8EE8-0F1C9F3C4E7C.jpeg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/67239FBB-E15D-4F4F-8EE8-0F1C9F3C4E7C.jpeg" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="></a><span></span></div></div>


]]></content>
  </entry>
  <entry>
    <title>GLogä½¿ç”¨è®°å½•</title>
    <url>/2021/12/12/GLog%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<p>â€‹        GoogleLogging çš„ä½¿ç”¨: åŒ…æ‹¬å®‰è£…ä½¿ç”¨ä¸åŠŸèƒ½é…ç½®.</p>
<span id="more"></span>



<h1 id="ä¸‹è½½ä¸å®‰è£…"><a href="#ä¸‹è½½ä¸å®‰è£…" class="headerlink" title="ä¸‹è½½ä¸å®‰è£…"></a>ä¸‹è½½ä¸å®‰è£…</h1><p>æ—¥å¿—åœ¨å·¥ç¨‹ä¸­ç”¨æ¥è®°å½•ç¨‹åºä¸­é—´ä¿¡æ¯,æ˜¯ä¸å¯æˆ–ç¼ºçš„.æˆ‘å¸¸ç”¨çš„æœ‰:</p>
<ul>
<li>log4cpp: ç»å…¸æ¬¾</li>
<li><a href="https://github.com/PlatformLab/NanoLog">NanoLog</a>:ç°ä»£æ¬¾,é€Ÿåº¦ææ€–</li>
<li><a href="https://github.com/google/glog">glog</a>: ç»å…¸æ¬¾, ç”¨çš„æ¯”è¾ƒå¤š.</li>
<li>å¦‚æœåœ¨rosæ¡†æ¶å†…,ä½¿ç”¨ROSè‡ªå¸¦çš„æ—¥å¿—ä¹Ÿèƒ½è®°å½•,å¯èƒ½å°±æ˜¯åŠŸèƒ½æ¬ ç¼ºäº†ç‚¹.</li>
</ul>
<p>glogè¯´ä¸ä¸Šæœ‰ä»€ä¹ˆä¼˜ç‚¹. åœ¨ä¸è¿½æ±‚ä»€ä¹ˆå¤šçº¿ç¨‹å¼‚æ­¥æ—¥å¿—,ä¸è¿½æ±‚æè‡´æ€§èƒ½çš„æ—¶å€™æ— è„‘ç”¨å°±å®Œäº‹. <a href="https://github.com/google/glog">github</a> ä¸‹è½½, ç„¶åæŒ‰cmakeæ„å»ºå³å¯.</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ³¨: æœ€è¿‘glogæ”¯æŒmodern cmake å†™æ³•linkä¸Šaliaså³å¯glog::glog</span></span><br><span class="line"><span class="keyword">find_package</span> (glog <span class="number">0.6</span>.<span class="number">0</span> REQUIRED)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span> (myapp main.cpp)</span><br><span class="line"><span class="keyword">target_link_libraries</span> (myapp glog::glog)</span><br></pre></td></tr></table></figure>

<h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><h2 id="ç®€å•æ—¥å¿—æ¡ç›®"><a href="#ç®€å•æ—¥å¿—æ¡ç›®" class="headerlink" title="ç®€å•æ—¥å¿—æ¡ç›®"></a>ç®€å•æ—¥å¿—æ¡ç›®</h2><div class="story post-story"><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŒ…å« #include &lt;glog/logging.h&gt;</span></span><br><span class="line"><span class="built_in">TEST</span>(glog, simple_log) &#123;</span><br><span class="line">    <span class="built_in">LOG</span>(WARNING) &lt;&lt; <span class="string">&quot;WARNING\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(INFO) &lt;&lt; <span class="string">&quot;INFO\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(WARNING) &lt;&lt; <span class="string">&quot;WARNING\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(ERROR) &lt;&lt; <span class="string">&quot;ERROR\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(FATAL) &lt;&lt; <span class="string">&quot;FATAL\n&quot;</span>;   <span class="comment">// FATALæ—¥å¿—ä¼šç»ˆç«¯ç¨‹åºå¹¶æ‰“å°è°ƒç”¨å †æ ˆ</span></span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">0</span>) &lt;&lt; <span class="string">&quot;VLOG(0)\n&quot;</span>;   <span class="comment">// verbose logging, çº§åˆ«ä¸ºinfo, å¯ä»¥è®¤ä¸ºæ˜¯å¯¹infoè¿›è¡Œç»†ç²’åº¦ç­‰çº§æ§åˆ¶.</span></span><br><span class="line">&#125;</span><br><span class="line">--- ç»“æœ:</span><br><span class="line">WARNING: <span class="function">Logging before <span class="title">InitGoogleLogging</span><span class="params">()</span> is written to STDERR</span></span><br><span class="line"><span class="function">W20211212 15:<span class="number">39</span>:<span class="number">10.839241</span>  <span class="number">9219</span> main.cpp:<span class="number">6</span>] WARNING</span></span><br><span class="line"><span class="function">I20211212 <span class="number">15</span>:<span class="number">39</span>:<span class="number">10.839362</span>  <span class="number">9219</span> main.cpp:<span class="number">7</span>] INFO</span></span><br><span class="line"><span class="function">W20211212 <span class="number">15</span>:<span class="number">39</span>:<span class="number">10.839380</span>  <span class="number">9219</span> main.cpp:<span class="number">8</span>] WARNING</span></span><br><span class="line"><span class="function">E20211212 <span class="number">15</span>:<span class="number">39</span>:<span class="number">10.839396</span>  <span class="number">9219</span> main.cpp:<span class="number">9</span>] ERROR</span></span><br><span class="line"><span class="function">F20211212 <span class="number">15</span>:<span class="number">39</span>:<span class="number">10.839416</span>  <span class="number">9219</span> main.cpp:<span class="number">10</span>] FATAL</span></span><br><span class="line"><span class="function">*** Check failure stack trace: ***</span></span><br><span class="line"><span class="function">[<span class="number">1</span>]    <span class="number">9219</span> abort (core dumped)  ./test_glog</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœideæœ‰ç‰¹æ®Šæ”¯æŒ(å¦‚clion)åˆ™å¯ä»¥æœ‰å¦‚ä¸‹æ•ˆæœ: ç‚¹å‡» è“è‰²æ–‡æœ¬ è°ƒè½¬ åˆ°æœ¬è¡Œæ—¥å¿—ä»£ç å¤„.</p>
<p><img src="https://s2.loli.net/2021/12/12/Pk3zHLjOMXxAYS2.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/Pk3zHLjOMXxAYS2.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212154112321"></p>
</div><h2 id="ç‰¹æ®Šæ—¥å¿—æ¡ç›®"><a href="#ç‰¹æ®Šæ—¥å¿—æ¡ç›®" class="headerlink" title="ç‰¹æ®Šæ—¥å¿—æ¡ç›®"></a>ç‰¹æ®Šæ—¥å¿—æ¡ç›®</h2><div class="story post-story"><p>glogä¹Ÿå……åˆ†ä½“ä¼šäº†å¤§å®¶çš„éœ€æ±‚, æä¾›äº†ä¸€äº›ç‰¹æ®Šçš„LOG.ä¸‹é¢ç»“åˆéœ€æ±‚ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„</p>
<ul>
<li><p>LOG_EVERY_N: å½“æœ‰ä¸€ä¸ªä»¥å¾ˆé«˜é¢‘ç‡(1K)è¢«æ‰§è¡Œçš„åœ°æ–¹éœ€è¦è¾“å‡ºæ—¶, ä½¿ç”¨æ­¤æ–¹æ³•æ¥é¿å…æ‰“å°æ»¡å±çš„ä¿¡æ¯ä½¿å¾—å…¶ä»–ä¿¡æ¯è¢«æ¹®æ²¡.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">2000</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">LOG_EVERY_N</span>(WARNING, <span class="number">1000</span>) &lt;&lt; <span class="string">&quot;LOG_EVERY_N&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>LOG_IF: å¸¸ç”¨è¯­å½“æ¡ä»¶ä¸æ»¡è¶³æ—¶å€™å‘å‡ºè­¦å‘Š.æ³¨:<code>LOG_ASSERT(cond) ç­‰ä»·äºLOG_IF(FATAL, cond) </code>;</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">LOG_IF</span>(WARNING, when_cond_make_true)&lt;&lt; <span class="string">&quot;LOG_IF\n&quot;</span>;</span><br><span class="line">ç”¨äºæ›¿æ¢<span class="keyword">if</span>(when_cond_make_true) &#123;<span class="built_in">LOG</span>(level)&lt;&lt;...;&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>LOG_FIRST_N: å¯¹å‰Næ¬¡è¿›è¡Œè¾“å‡º,ä¸€èˆ¬æ²¡ç”¨åˆ°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">LOG_FIRST_N</span>(WARNING, <span class="number">10</span>) &lt;&lt; <span class="string">&quot;LOG_FIRST_N\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="åŠŸèƒ½é…ç½®"><a href="#åŠŸèƒ½é…ç½®" class="headerlink" title="åŠŸèƒ½é…ç½®"></a>åŠŸèƒ½é…ç½®</h1><p>å¦‚æœæ—¥å¿—åªæ˜¯èƒ½æ‰“å°åœ¨å…¬å±ä¸Š,é‚£ä¸å«æ—¥å¿—(ä¸å¦‚ç”¨libfmt).æ—¥å¿—è¿˜éœ€è¦èƒ½:<code>å†™å…¥æ—¥å¿—æ–‡ä»¶</code> / <code>æŒ‰çº§ç­›é€‰ä¿¡æ¯</code>/ â€¦</p>
<p>glogä½¿ç”¨è‡ªå®¶gflagsæ¥è¿›è¡Œå‚æ•°é…ç½®, å¯ä»¥ä»<code>ä»£ç </code>/<code>é…ç½®æ–‡ä»¶</code>/<code>ç¯å¢ƒå˜é‡</code> ä¸­è¯»å–é…ç½®.å…·ä½“ä½¿ç”¨çœ‹éœ€æ±‚:smile:. ä¸‹é¢å°†ä»‹ç»å¸¸ç”¨é…ç½®:</p>
</div><h2 id="å¿…å¤‡"><a href="#å¿…å¤‡" class="headerlink" title="å¿…å¤‡"></a>å¿…å¤‡</h2><div class="story post-story"><p>åˆšæ‰çš„ä¾‹å­éƒ½æ˜¯åªåœ¨ç»ˆç«¯ä¸Šæ˜¾å¼,ä¸”æç¤º<code>WARNING: Logging before InitGoogleLogging() is written to STDERR</code> æ˜¯å› ä¸ºå¹¶æ²¡æœ‰åˆå§‹åŒ–. ä¸‹é¢å¯¹glogè¿›è¡Œåˆå§‹åŒ–æ¥å¼€å¯å…¨åŠŸèƒ½</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">--- èƒ½æ‹¿åˆ°è¿›ç¨‹å…¥å£å‚æ•°æ—¶ </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span> </span>&#123;</span><br><span class="line">    google::<span class="built_in">InitGoogleLogging</span>(argv[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line">--- ä¸èƒ½æ‹¿åˆ°è¿›ç¨‹å…¥å£å‚æ•°æ—¶</span><br><span class="line"><span class="keyword">static</span> std::string params;</span><br><span class="line">google::<span class="built_in">InitGoogleLogging</span>(params.<span class="built_in">c_str</span>());</span><br></pre></td></tr></table></figure>



</div><h2 id="æ—¥å¿—æ–‡ä»¶å†™å…¥è®¾ç½®"><a href="#æ—¥å¿—æ–‡ä»¶å†™å…¥è®¾ç½®" class="headerlink" title="æ—¥å¿—æ–‡ä»¶å†™å…¥è®¾ç½®"></a>æ—¥å¿—æ–‡ä»¶å†™å…¥è®¾ç½®</h2><div class="story post-story"><p>é»˜è®¤å¼€å¯æ–‡ä»¶å†™å…¥(é»˜è®¤ç›®å½•ä¸ºæ ¹ç›®å½•/tmp).</p>
<p> æ³¨:<code>glogçš„è¾“å‡ºåˆ°æ–‡ä»¶å’Œè¾“å‡ºåˆ°ç»ˆç«¯æ˜¯å¯ä»¥åˆ†åˆ«æ§åˆ¶çš„,é…ç½®ä¸å½“å¯èƒ½æ²¡æ˜¾å¼åœ¨ç»ˆç«¯å´å·²ç»å†™å…¥äº†æ–‡ä»¶, æ­¤æ—¶ä¼šè®©äººè§‰å¾—ç¨‹åºæ²¡æœ‰æ‰§è¡Œåˆ°æ‰€æœŸæœ›çš„è¯­å¥.</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">TEST</span>(glog, log_file) &#123;</span><br><span class="line">    <span class="function">std::string <span class="title">params</span><span class="params">(<span class="string">&quot;test_glog&quot;</span>)</span></span>;</span><br><span class="line">    google::<span class="built_in">InitGoogleLogging</span>(params.<span class="built_in">c_str</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * @brief è®¾ç½®INFOç­‰çº§çš„æ—¥å¿—ç›®å½•å’Œæ–‡ä»¶å</span></span><br><span class="line"><span class="comment">     * @attention ä»¥ä¸‹å„ç§å‚æ•°çš„ä¸åŒ</span></span><br><span class="line"><span class="comment">     * 0. ç¡®ä¿&quot;../info/&quot; ä¸­infoç›®å½•çš„å­˜åœ¨,å¦åˆ™å¤±è´¥.</span></span><br><span class="line"><span class="comment">     * 1. &quot;../info/&quot;  è¾“å‡ºåˆ°ç›®å½•infoä¸‹,æ²¡æœ‰æŒ‡å®šç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶å,é»˜è®¤æŒ‰æ—¶é—´å‘½åä¸º: ../info/20211212-163428.11990</span></span><br><span class="line"><span class="comment">     * 2. &quot;../info&quot;  å°‘äº†æœ«ä½çš„&#x27;/&#x27;, è¢«è§£é‡Šä¸º: ../info20211212-164011.12224</span></span><br><span class="line"><span class="comment">     * 3. &quot;../info/base_name  è¢«è§£é‡Šä¸º: ../info/base_name20211212-164011.12224</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    google::<span class="built_in">SetLogDestination</span>(google::INFO, <span class="string">&quot;../info/base_name&quot;</span>);</span><br><span class="line">    <span class="comment">// è§£é‡Šä¸º: ../info/base_name.externtion20211212-164309.12362</span></span><br><span class="line">    FLAGS_timestamp_in_logfile_name = <span class="literal">false</span>;  <span class="comment">// å»æ‰æ–‡ä»¶ååçš„æ—¶é—´æˆ³, å¯ä»¥è‡ªå·±æŒ‡å®šå…¶ä»–æ ‡å¿—æ¥åŒºåˆ†.</span></span><br><span class="line">    std::string dir = <span class="string">&quot;../info&quot;</span>, base_name = <span class="string">&quot;base_name&quot;</span>, externtion = <span class="string">&quot;.externtion&quot;</span>;</span><br><span class="line">    std::string cmd=<span class="string">&quot;mkdir &quot;</span>+ dir;</span><br><span class="line">    <span class="built_in">system</span>(cmd.<span class="built_in">c_str</span>()); <span class="comment">//ç¡®ä¿&quot;../info/&quot; ä¸­infoç›®å½•çš„å­˜åœ¨,å¦åˆ™å¤±è´¥.</span></span><br><span class="line">    google::<span class="built_in">SetLogDestination</span>(google::INFO, (dir + <span class="string">&quot;/&quot;</span> + base_name).<span class="built_in">c_str</span>());</span><br><span class="line">    google::<span class="built_in">SetLogFilenameExtension</span>(externtion.<span class="built_in">c_str</span>()); <span class="comment">// è®¾ç½®æ‹“å±•å</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  @brief ä¸ºæœ€è¿‘ä¸€æ¬¡ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶åœ¨æŒ‡å®šåœ°ç‚¹ç”Ÿæˆè½¯é“¾æ¥</span></span><br><span class="line"><span class="comment">     *  å¦‚ä¸‹ä¾‹å­è§£é‡Šä¸ºç”Ÿæˆ[INFOæ—¥å¿—ç›®å½•]å’Œ[FLAGS_log_link]ä¸‹éƒ½ç”Ÿæˆ[latest.INFO] é“¾æ¥.</span></span><br><span class="line"><span class="comment">     *  @attention æ˜¯ç”¨æ¥åœ¨å¿«é€ŸæŸ¥çœ‹æœ€æ–°INFOæ—¥å¿—çš„æ–¹æ³•,é¿å…åœ¨INFOæ—¥å¿—ç›®å½•ä¸‹æ‰‹åŠ¨å¯»æ‰¾æœ€æ–°.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    FLAGS_log_link = dir + <span class="string">&quot;/../&quot;</span>; <span class="comment">// å¿…é¡»ä¸ºç»å¯¹è·¯å¾„,å¦åˆ™å»ºç«‹å¤±è´¥</span></span><br><span class="line">    std::string log_symlink = <span class="string">&quot;latest&quot;</span>;</span><br><span class="line">    google::<span class="built_in">SetLogSymlink</span>(google::INFO, log_symlink.<span class="built_in">c_str</span>());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">LOG</span>(INFO) &lt;&lt; <span class="string">&quot;INFO\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æ­¤å¤–è®¾ç½®<code>FLAGS_log_prefix = false;</code> å¯ä»¥ä½¿å¾—æ—¥å¿—ä¸å¸¦å‰ç¼€.</p>
<p><code>I20211212 17:25:28.392503 15469 main.cpp:37] INFO                 =&gt;                 INFO</code></p>
<h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>åœ¨é¡¹ç›®ä¸­æˆ‘æŒ‰ <code>è¿›ç¨‹/æ¯å¤©1ä¸ªæ–‡ä»¶å¤¹/ç­‰çº§</code>æ¥å®‰æ’æ—¥å¿—,å¹¶åœ¨å¤–å±‚æ”¾ç½®æœ€æ–°ä¸€æ¬¡æ—¥å¿—çš„é“¾æ¥æ–¹ä¾¿æŸ¥çœ‹.</p>
<p><img src="https://s2.loli.net/2021/12/12/wDQl6GXagH3eNKy.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/wDQl6GXagH3eNKy.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212184837708"></p>
</div><h2 id="ç»ˆç«¯-stderr-æ˜¾å¼"><a href="#ç»ˆç«¯-stderr-æ˜¾å¼" class="headerlink" title="ç»ˆç«¯(stderr)æ˜¾å¼"></a>ç»ˆç«¯(stderr)æ˜¾å¼</h2><div class="story post-story"><p>æ³¨:<code>stderræ²¡æœ‰ç¼“å­˜,ä¼šç›´æ¥æ‰“å°åˆ°ç»ˆç«¯å¹¶æ˜¾å¼çº¢è‰².å› æ­¤å¯èƒ½å…¶å’Œstdoutçš„æ‰§è¡Œé¡ºåºä¼šé¢ å€’.</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">TEST</span>(glog, log_stderr) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//FLAGS_logtostderr=true;  // æ‰“å¼€æ³¨é‡Šåˆ™ä¸è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶,åªè¾“å‡ºåˆ°stderr</span></span><br><span class="line">    <span class="built_in">fprintf</span>(stderr,<span class="string">&quot;before FLAGS_stderrthreshold=0\n&quot;</span>);</span><br><span class="line">    <span class="built_in">LOG</span>(INFO) &lt;&lt; <span class="string">&quot;INFO\n&quot;</span>;       <span class="comment">// æœªè®¾ç½®FLAGS_stderrthreshold(é»˜è®¤error), å› æ­¤æ­¤æ¡ä¸è¾“å‡ºåˆ°ç»ˆç«¯,ä½†å¯ä»¥è¾“å‡ºåˆ°æ—¥å¿—</span></span><br><span class="line">    <span class="built_in">LOG</span>(WARNING) &lt;&lt; <span class="string">&quot;WARNING\n&quot;</span>;  <span class="comment">// æœªè®¾ç½®FLAGS_stderrthreshold(é»˜è®¤ä¸ºerror) å› æ­¤æ­¤æ¡ä¸è¾“å‡ºåˆ°ç»ˆç«¯,ä½†å¯ä»¥è¾“å‡ºåˆ°æ—¥å¿—</span></span><br><span class="line">    <span class="built_in">LOG</span>(ERROR) &lt;&lt; <span class="string">&quot;ERROR\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®è¾“å‡ºåˆ°stderrçš„æ—¥å¿—çº§åˆ«é™åˆ¶ å¤§äºç­‰äºæ­¤å€¼çº§åˆ«çš„æ—¥å¿—æ‰èƒ½æ˜¾å¼åœ¨ç»ˆç«¯.å–å€¼[0, 4].</span></span><br><span class="line">    FLAGS_stderrthreshold = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">fprintf</span>(stderr,<span class="string">&quot;after FLAGS_stderrthreshold=0\n&quot;</span>);</span><br><span class="line">    <span class="built_in">LOG</span>(INFO) &lt;&lt; <span class="string">&quot;INFO\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(WARNING) &lt;&lt; <span class="string">&quot;WARNING\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(ERROR) &lt;&lt; <span class="string">&quot;ERROR\n&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¾ç½®å½©è‰²stderr</span></span><br><span class="line">    FLAGS_colorlogtostderr = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">fprintf</span>(stderr,<span class="string">&quot;after FLAGS_colorlogtostderr=true\n&quot;</span>);</span><br><span class="line">    <span class="built_in">LOG</span>(INFO) &lt;&lt; <span class="string">&quot;INFO\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(WARNING) &lt;&lt; <span class="string">&quot;WARNING\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(ERROR) &lt;&lt; <span class="string">&quot;ERROR\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><img src="https://s2.loli.net/2021/12/12/JwGIRSvqVaQcZC7.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/JwGIRSvqVaQcZC7.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212170845497"></p>
</div><h2 id="ç­‰çº§è¿‡æ»¤"><a href="#ç­‰çº§è¿‡æ»¤" class="headerlink" title="ç­‰çº§è¿‡æ»¤"></a>ç­‰çº§è¿‡æ»¤</h2><div class="story post-story"><p>èƒ½è®¾ç½®ç­‰çº§çš„ä¸€ä¸ªæœ‰3ä¸ªå˜é‡ä¸‹é¢ä¸€ä¸€ä»‹ç»:  </p>
<ul>
<li><p>FLAGS_v: è®¾ç½®VLOGç­‰çº§,VLOGæ˜¯INFOçº§åˆ«çš„. ä½†æ˜¯å¯¹INFOå†…åˆåˆ’åˆ†äº†çº§åˆ«,å¯ä»¥è¿›è¡Œç»†ç²’åº¦æ§åˆ¶(å› ä¸ºINFOçº§åˆ«ç”¨çš„æœ€å¤š)</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">TEST</span>(glog, filter) &#123;</span><br><span class="line"><span class="comment">//    FLAGS_stderrthreshold = 0;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">0</span>) &lt;&lt;<span class="string">&quot;VLOG(0)\n&quot;</span>;</span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">1</span>) &lt;&lt;<span class="string">&quot;VLOG(1)\n&quot;</span>;</span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">2</span>) &lt;&lt;<span class="string">&quot;VLOG(2)\n&quot;</span>;</span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">3</span>) &lt;&lt;<span class="string">&quot;VLOG(3)\n&quot;</span>;</span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">4</span>) &lt;&lt;<span class="string">&quot;VLOG(4)\n&quot;</span>;</span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">5</span>) &lt;&lt;<span class="string">&quot;VLOG(5)\n&quot;</span>;</span><br><span class="line">    FLAGS_v = <span class="number">2</span>;   <span class="comment">// åªè®°å½• VLOGçº§åˆ«ä¸å¤§äºæ­¤å€¼çš„VLOG.</span></span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">0</span>) &lt;&lt;<span class="string">&quot;VLOG(0)\n&quot;</span>;</span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">1</span>) &lt;&lt;<span class="string">&quot;VLOG(1)\n&quot;</span>;</span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">2</span>) &lt;&lt;<span class="string">&quot;VLOG(2)\n&quot;</span>;</span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">3</span>) &lt;&lt;<span class="string">&quot;VLOG(3)\n&quot;</span>;</span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">4</span>) &lt;&lt;<span class="string">&quot;VLOG(4)\n&quot;</span>;</span><br><span class="line">    <span class="built_in">VLOG</span>(<span class="number">5</span>) &lt;&lt;<span class="string">&quot;VLOG(5)\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°è±¡æ˜¯, ç»ˆç«¯æ— è¾“å‡º(å› ä¸ºæ²¡è®¾ç½®FLAGS_stderrthresholdä¸º0,é»˜è®¤åªæœ‰errorçº§åˆ«ä»¥ä¸Šæ‰è¾“å‡º),è€Œæ—¥å¿—æ–‡ä»¶æœ‰è¾“å‡º.</p>
<p><img src="https://s2.loli.net/2021/12/12/5NhkueMKvaDZ7wX.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/5NhkueMKvaDZ7wX.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212172742578"></p>
<p>æ­¤å¤–,è¿˜å¯ä»¥å¯¹ä¸åŒæºæ–‡ä»¶æŒ‡å®šä¸åŒçš„VLOGçº§åˆ«<code> google::SetVLOGLevel</code>,ä¸Šè¿°<code>FLAGS_v=2</code>å¯ä»¥æ›¿æ¢ä¸º<code>    google::SetVLOGLevel(&quot;main&quot;,2);</code> ç°è±¡ä¸€è‡´..</p>
</li>
<li><p>FLAGS_stderrthreshold: ä¸Šé¢è¯´è¿‡çš„,è®¾ç½®è¾“å‡ºåˆ°stderrçš„çº§åˆ«é™åˆ¶.</p>
</li>
<li><p>FLAGS_minloglevel: åŒæ—¶é™åˆ¶æ—¥å¿—å’Œstderroræœ€ä½è¾“å‡ºç­‰çº§.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">TEST</span>(glog, filter) &#123;</span><br><span class="line">    FLAGS_stderrthreshold = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;after FLAGS_stderrthreshold=0\n&quot;</span>);</span><br><span class="line">    <span class="built_in">LOG</span>(INFO) &lt;&lt; <span class="string">&quot;INFO\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(WARNING) &lt;&lt; <span class="string">&quot;WARNING\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(ERROR) &lt;&lt; <span class="string">&quot;ERROR\n&quot;</span>;</span><br><span class="line">    FLAGS_minloglevel = <span class="number">2</span>; <span class="comment">// 0:INFO 1: WARNING 2:ERROR 3:FATAL</span></span><br><span class="line">    <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;after FLAGS_minloglevel=2\n&quot;</span>);</span><br><span class="line">    <span class="built_in">LOG</span>(INFO) &lt;&lt; <span class="string">&quot;INFO\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(WARNING) &lt;&lt; <span class="string">&quot;WARNING\n&quot;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(ERROR) &lt;&lt; <span class="string">&quot;ERROR\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2021/12/12/zRf9WNCiEJ8DK2U.png" class="lazyload" data-srcset="https://s2.loli.net/2021/12/12/zRf9WNCiEJ8DK2U.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="image-20211212172140972"></p>
</li>
</ul>
<p>æ³¨:è¿™å‡ ä¸ªFLAGSä¹‹é—´æœ‰è¦†ç›–å…³ç³». </p>
</div><h2 id="æ—¥å¿—å¤§å°"><a href="#æ—¥å¿—å¤§å°" class="headerlink" title="æ—¥å¿—å¤§å°"></a>æ—¥å¿—å¤§å°</h2><div class="story post-story"><p>æ­¤å¤–è¿˜æä¾›æ—¥å¿—å¤§å°çš„é™åˆ¶, å½“ç¡¬ç›˜ç©ºé—´ä¸è¶³æ—¶åœæ­¢å†™å…¥æˆ–è€…å½“æ—¥å¿—å¤§å°è¶…è¿‡ä¸€å®šå¤§å°(MB)ååœæ­¢å†™å…¥.</p>
<p>è¯¦è§:FLAGS_max_log_sizeå’ŒFLAGS_stop_logging_if_full_disk</p>
</div><h2 id="ä¿¡å·æ•æ‰ä¸é—è¨€"><a href="#ä¿¡å·æ•æ‰ä¸é—è¨€" class="headerlink" title="ä¿¡å·æ•æ‰ä¸é—è¨€"></a>ä¿¡å·æ•æ‰ä¸é—è¨€</h2><div class="story post-story"><p>glogå¯¹å¸¸è§çš„è¿›ç¨‹å¤±è´¥ä¿¡å·è¿›è¡Œå¤„ç†,å¦‚å¸¸è§çš„SIGABRT/SIGSEGVç­‰.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">TEST</span>(glog, sig) &#123;</span><br><span class="line">    google::<span class="built_in">InstallFailureSignalHandler</span>();</span><br><span class="line">    <span class="keyword">int</span> array[<span class="number">1</span>];</span><br><span class="line">    array[<span class="number">2</span>] = <span class="number">0</span>; <span class="comment">// overflow</span></span><br><span class="line">&#125;</span><br><span class="line">--- è¾“å‡ºåˆ°ç»ˆç«¯å¦‚ä¸‹</span><br><span class="line">*** stack smashing detected ***: &lt;unknown&gt; terminated</span><br><span class="line">*** Aborted at <span class="number">1639302205</span> (unix time) <span class="keyword">try</span> <span class="string">&quot;date -d @1639302205&quot;</span> <span class="keyword">if</span> you are <span class="keyword">using</span> GNU date ***</span><br><span class="line">PC: @                <span class="number">0x0</span> (unknown)</span><br><span class="line">*** <span class="built_in">SIGABRT</span> (@<span class="number">0x3e800003f7b</span>) received by PID <span class="number">16251</span> (TID <span class="number">0x7fc5925c9e80</span>) from PID <span class="number">16251</span>; stack trace: ***</span><br><span class="line">    @     <span class="number">0x7fc591fc9980</span> (unknown)</span><br><span class="line">    @     <span class="number">0x7fc5912c5fb7</span> gsignal</span><br><span class="line">    @     <span class="number">0x7fc5912c7921</span> abort</span><br><span class="line">    @     <span class="number">0x7fc591310967</span> (unknown)</span><br><span class="line">    @     <span class="number">0x7fc5913bbb61</span> (unknown)</span><br><span class="line">    @     <span class="number">0x7fc5913bbb22</span> __stack_chk_fail</span><br><span class="line">    @     <span class="number">0x55a985bd43a0</span> glog_sig_Test::<span class="built_in">TestBody</span>()</span><br><span class="line">    @     <span class="number">0x55a985c24bbf</span> testing::internal::HandleSehExceptionsInMethodIfSupported&lt;&gt;()</span><br><span class="line">    @     <span class="number">0x55a985c1dbdd</span> testing::internal::HandleExceptionsInMethodIfSupported&lt;&gt;()</span><br><span class="line">    @     <span class="number">0x55a985bf47ca</span> testing::Test::<span class="built_in">Run</span>()</span><br><span class="line">    @     <span class="number">0x55a985bf5198</span> testing::TestInfo::<span class="built_in">Run</span>()</span><br><span class="line">    @     <span class="number">0x55a985bf5a76</span> testing::TestSuite::<span class="built_in">Run</span>()</span><br><span class="line">    @     <span class="number">0x55a985c04c04</span> testing::internal::UnitTestImpl::<span class="built_in">RunAllTests</span>()</span><br><span class="line">    @     <span class="number">0x55a985c25ded</span> testing::internal::HandleSehExceptionsInMethodIfSupported&lt;&gt;()</span><br><span class="line">    @     <span class="number">0x55a985c1eb97</span> testing::internal::HandleExceptionsInMethodIfSupported&lt;&gt;()</span><br><span class="line">    @     <span class="number">0x55a985c0340e</span> testing::UnitTest::<span class="built_in">Run</span>()</span><br><span class="line">    @     <span class="number">0x55a985c36530</span> <span class="built_in">RUN_ALL_TESTS</span>()</span><br><span class="line">    @     <span class="number">0x55a985c364bf</span> main</span><br><span class="line">    @     <span class="number">0x7fc5912a8bf7</span> __libc_start_main</span><br><span class="line">    @     <span class="number">0x55a985bd3a3a</span> _start</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">134</span> (interrupted by signal <span class="number">6</span>: SIGABRT)</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°åªæ˜¯æ˜¾å¼åœ¨ç»ˆç«¯, å¦‚æœæƒ³å°†ä¸Šé¢çš„æ–‡æœ¬åŠ å…¥åˆ°æ—¥å¿—æ–‡ä»¶åˆ™:</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FailureToLog</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *data, <span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> msg[size + <span class="number">1</span>];</span><br><span class="line">    <span class="built_in">memcpy</span>(msg, data, size);</span><br><span class="line">    msg[size - <span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    msg[size] = <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    <span class="built_in">LOG</span>(ERROR) &lt;&lt; msg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ™å°†æ—¥å¿—æ‰“å°åˆ°ERRORä¸­.</p>
<h1 id="åŠŸèƒ½æ·»åŠ "><a href="#åŠŸèƒ½æ·»åŠ " class="headerlink" title="åŠŸèƒ½æ·»åŠ "></a>åŠŸèƒ½æ·»åŠ </h1></div><h2 id="å°å·¥å…·"><a href="#å°å·¥å…·" class="headerlink" title="å°å·¥å…·"></a>å°å·¥å…·</h2><div class="story post-story"><p>é…åˆfmtå˜é‡æ‰“å°</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fmt/format.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fmt/ranges.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/preprocessor.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BOOST_PP_SEQ_FOR_EACH_LOGDEBUG_STR_MACRO(i, ctx, elem) \</span></span><br><span class="line"><span class="meta">                                                            BOOST_PP_STRINGIZE(elem) <span class="meta-string">&quot; = &#123;&#125;. &quot;</span>                          \</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BOOST_PP_SEQ_FOR_EACH_LOGDEBUG_STR(seq)             BOOST_PP_SEQ_FOR_EACH(                                      \</span></span><br><span class="line"><span class="meta">                                                                BOOST_PP_SEQ_FOR_EACH_LOGDEBUG_STR_MACRO,               \</span></span><br><span class="line"><span class="meta">                                                                BOOST_PP_SEQ_SIZE(seq),seq)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> BOOST_PP_SEQ_FOR_EACH_LOGDEBUG_ARGS(seq)            BOOST_PP_SEQ_ENUM(seq)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> VLOGF(LEVEL, MODULE, ...)                           VLOG(LEVEL) &lt;&lt;fmt::format(<span class="meta-string">&quot;[&quot;</span> #MODULE <span class="meta-string">&quot;] &quot;</span>)                 \</span></span><br><span class="line"><span class="meta">                                                                        &lt;&lt; fmt::format(__VA_ARGS__)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LOGF(LEVEL, MODULE, ...)                            LOG(LEVEL)  &lt;&lt;fmt::format(<span class="meta-string">&quot;[&quot;</span> #MODULE <span class="meta-string">&quot;] &quot;</span>)                 \</span></span><br><span class="line"><span class="meta">                                                                        &lt;&lt; fmt::format(__VA_ARGS__)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> VLOG_DEBUG(LEVEL, MODULE, SEQ)                      VLOGF(LEVEL,MODULE,BOOST_PP_SEQ_FOR_EACH_LOGDEBUG_STR(SEQ), \</span></span><br><span class="line"><span class="meta">                                                                              BOOST_PP_SEQ_FOR_EACH_LOGDEBUG_ARGS(SEQ)) \</span></span><br><span class="line"><span class="meta">                                                                              &lt;&lt; fmt::format(<span class="meta-string">&quot;\n&quot;</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LOG_DEBUG(LEVEL, MODULE, SEQ)                       LOGF(LEVEL,MODULE,BOOST_PP_SEQ_FOR_EACH_LOGDEBUG_STR(SEQ),  \</span></span><br><span class="line"><span class="meta">                                                                              BOOST_PP_SEQ_FOR_EACH_LOGDEBUG_ARGS(SEQ)) \</span></span><br><span class="line"><span class="meta">                                                                              &lt;&lt; fmt::format(<span class="meta-string">&quot;\n&quot;</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">TEST</span>(glog, utils) &#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>, b;</span><br><span class="line">    std::vector&lt;<span class="keyword">int</span>&gt; c&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line">    <span class="built_in">LOG_DEBUG</span>(ERROR, glog_utils_test, (a)(b)(c));</span><br><span class="line">&#125;</span><br><span class="line">---</span><br><span class="line">E20211212 <span class="number">17</span>:<span class="number">55</span>:<span class="number">57.852751</span> <span class="number">17268</span> main.cpp:<span class="number">93</span>] [glog_utils_test] a = <span class="number">0.</span> b = <span class="number">21968.</span> c = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]. </span><br></pre></td></tr></table></figure>

</div><h2 id="ä½¿èƒ½åŠŸèƒ½"><a href="#ä½¿èƒ½åŠŸèƒ½" class="headerlink" title="ä½¿èƒ½åŠŸèƒ½"></a>ä½¿èƒ½åŠŸèƒ½</h2><div class="story post-story"><p>æƒ³ä½¿å¾—glogä½¿èƒ½å’Œå¤±èƒ½å¾ˆç®€å•.æŠŠç­‰çº§é˜ˆå€¼éƒ½è®¾ç½®æœ€é«˜å³å¯.</p>
<p>ä¹Ÿå¯ä»¥åœ¨glogging.ccå†…æ·»åŠ </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="built_in">GLOG_DEFINE_bool</span>(enable,</span><br><span class="line">                 <span class="built_in">BoolFromEnv</span>(<span class="string">&quot;GOOGLE_ENABLE&quot;</span>, <span class="literal">false</span>),</span><br><span class="line">                 <span class="string">&quot;enable glog&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨<code>void LogMessage::SendToLog() EXCLUSIVE_LOCKS_REQUIRED(log_mutex)</code>å¯¹<code>if (FLAGS_logtostderr || !IsGoogleLoggingInitialized())</code> çš„ä¸¤ä¸ªæƒ…å†µè¿›è¡Œä¿®æ”¹. </p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (FLAGS_logtostderr || !<span class="built_in">IsGoogleLoggingInitialized</span>()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (FLAGS_enable) &#123;</span><br><span class="line">        <span class="built_in">ColoredWriteToStderr</span>(data_-&gt;severity_,</span><br><span class="line">                             data_-&gt;message_text_, data_-&gt;num_chars_to_log_);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// this could be protected by a flag if necessary.</span></span><br><span class="line">    LogDestination::<span class="built_in">LogToSinks</span>(data_-&gt;severity_,</span><br><span class="line">                               data_-&gt;fullname_, data_-&gt;basename_,</span><br><span class="line">                               data_-&gt;line_, &amp;data_-&gt;tm_time_,</span><br><span class="line">                               data_-&gt;message_text_ + data_-&gt;num_prefix_chars_,</span><br><span class="line">                               (data_-&gt;num_chars_to_log_ -</span><br><span class="line">                                data_-&gt;num_prefix_chars_ - <span class="number">1</span>),</span><br><span class="line">                               data_-&gt;usecs_);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (FLAGS_enable) &#123;</span><br><span class="line">        <span class="comment">// log this message to all log files of severity &lt;= severity_</span></span><br><span class="line">        LogDestination::<span class="built_in">LogToAllLogfiles</span>(data_-&gt;severity_, data_-&gt;timestamp_,</span><br><span class="line">                                         data_-&gt;message_text_,</span><br><span class="line">                                         data_-&gt;num_chars_to_log_);</span><br><span class="line"></span><br><span class="line">        LogDestination::<span class="built_in">MaybeLogToStderr</span>(data_-&gt;severity_, data_-&gt;message_text_,</span><br><span class="line">                                         data_-&gt;num_chars_to_log_,</span><br><span class="line">                                         data_-&gt;num_prefix_chars_);</span><br><span class="line">        LogDestination::<span class="built_in">MaybeLogToEmail</span>(data_-&gt;severity_, data_-&gt;message_text_,</span><br><span class="line">                                        data_-&gt;num_chars_to_log_);</span><br><span class="line">    &#125;</span><br><span class="line">    LogDestination::<span class="built_in">LogToSinks</span>(data_-&gt;severity_,</span><br><span class="line">                               data_-&gt;fullname_, data_-&gt;basename_,</span><br><span class="line">                               data_-&gt;line_, &amp;data_-&gt;tm_time_,</span><br><span class="line">                               data_-&gt;message_text_ + data_-&gt;num_prefix_chars_,</span><br><span class="line">                               (data_-&gt;num_chars_to_log_</span><br><span class="line">                                - data_-&gt;num_prefix_chars_ - <span class="number">1</span>),</span><br><span class="line">                               data_-&gt;usecs_);</span><br><span class="line">    <span class="comment">// <span class="doctag">NOTE:</span> -1 removes trailing \n</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å¯ä»¥å¿«ä¹çš„å’Œå‰é¢ä¸€æ ·ä½¿ç”¨<code>FLAGS_enable</code>è¿›è¡Œå¼€å…³äº†(è®°å¾—å£°æ˜ä¸€ä¸‹å¯¹åº”çš„flag)</p>
</div><h2 id="é¢œè‰²ä¿®æ”¹"><a href="#é¢œè‰²ä¿®æ”¹" class="headerlink" title="é¢œè‰²ä¿®æ”¹"></a>é¢œè‰²ä¿®æ”¹</h2><div class="story post-story"><p>ä¿®æ”¹glogging.ccå†…<code>static GLogColor SeverityToColor(LogSeverity severity)</code> è¿™ä¸ªå‡½æ•°å’Œ<code>enum GLogColor</code> å¯¹åº”çš„tags.ä»¥åŠä¿®æ”¹æ¯ä¸ªtagå¯¹åº”çš„é¢œè‰².è¿™äº›é¢œè‰²éƒ½æ˜¯ansi code, å¯ä»¥æŸ¥è¯¢å¯¹åº”çš„.æˆ–åŠ å…¥é«˜äº®,ä¸‹åˆ’çº¿,é—ªçƒç­‰åŠŸèƒ½éƒ½æ˜¯å¯ä»¥çš„.</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> *<span class="title">GetAnsiColorCode</span><span class="params">(GLogColor color)</span> </span>&#123;</span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (color) &#123;</span><br><span class="line">        <span class="keyword">case</span> COLOR_BLACK:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;0&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> COLOR_RED:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> COLOR_GREEN:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;2&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> COLOR_YELLOW:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;3&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> COLOR_BLUE:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;4&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> COLOR_PURPLE:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;5&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> COLOR_DARK_GREEN:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;6&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> COLOR_WHITE:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;7&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> COLOR_DEFAULT:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>; <span class="comment">// stop warning about return type.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="æºç ä¸è¿è¡Œæµç¨‹åˆ†æ"><a href="#æºç ä¸è¿è¡Œæµç¨‹åˆ†æ" class="headerlink" title="æºç ä¸è¿è¡Œæµç¨‹åˆ†æ"></a>æºç ä¸è¿è¡Œæµç¨‹åˆ†æ</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">LOG(INFO) &lt;&lt;&quot;123\n&quot;;</span><br><span class="line">=&gt; </span><br><span class="line">COMPACT_GOOGLE_LOG_INFO.stream() &lt;&lt;&quot;123\n&quot;;</span><br><span class="line">=&gt;</span><br><span class="line">google::LogMessage(__FILE__, __LINE__).stream() &lt;&lt;&quot;123\n&quot;; </span><br><span class="line">å…¶ä¸­stream()è¿”å›LogStream(ç»§æ‰¿äºostream)å¹¶å°†bufferè®¾ç½®ä¸ºæ‰‹åŠ¨ç®¡ç†çš„.</span><br><span class="line">=&gt;</span><br><span class="line">è°ƒç”¨send_method_ = SendToLog å‡½æ•°</span><br><span class="line">=&gt; </span><br><span class="line">åˆ¤æ–­æ˜¯å¦åˆå§‹åŒ–.è¿›è¡Œæç¤º</span><br><span class="line">åˆ¤æ–­æ˜¯å¦éœ€è¦è¾“å‡ºåˆ°æ—¥å¿—æˆ–ç»ˆç«¯stderr</span><br><span class="line">åˆ¤æ–­æ˜¯å¦FATALé€€å‡ºç¨‹åºå’Œæ‰«å°¾å·¥ä½œ</span><br><span class="line">=&gt;</span><br><span class="line">LogToAllLogfiles  =&gt; MaybeLogToLogfileæŠŠæ¯ä¸ªçº§åˆ«çš„æ—¥å¿—å†™å…¥å¯¹åº”æ–‡ä»¶ä¸­.</span><br><span class="line">MaybeLogToStderr =&gt; è¾“å‡ºåˆ°ç»ˆç«¯stderr</span><br><span class="line">ColoredWriteToStderr ...</span><br><span class="line">MaybeLogToEmail ...</span><br></pre></td></tr></table></figure>






</div>]]></content>
      <categories>
        <category>æ•™ç¨‹</category>
        <category>åº“</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>C++</tag>
        <tag>åº“</tag>
      </tags>
  </entry>
</search>
